ARY = [0.5,0.3333333333333333,0.4,0.25,0.15384615384615385,0.23809523809523808,0.14705882352941177,0.23636363636363636,0.14606741573033707,9.027777777777778e-2,0.1459227467811159,9.018567639257294e-2,0.14590163934426228,9.017223910840932e-2,5.572949279899812e-2,9.01702786377709e-2,5.5728294666347766e-2,3.4441980783444195e-2,5.572811986113649e-2,3.4441872282762125e-2,5.572809435739959e-2,3.4441856452726016e-2,2.12862379206931e-2,3.444185414315488e-2,2.1286236495636855e-2,3.444185380619299e-2,2.1286236287723952e-2,1.3155617518388538e-2,2.1286236257389866e-2,1.31556174996293e-2,8.13061875776334e-3,1.3155617496892364e-2]
WorstCase = [0,0,4,2,2,6,4,31,9,7,23,12,260,26,18,73,33,26,70,44,248,83,62,188,108,1145,207,147,528,259,206,523]

X_INC = ARY.length.to_f
ABVk = 10**6
ABVM = 10**9

def setup
	size displayWidth, displayHeight
	text_font create_font("SanSerif",20)
	colorMode(HSB,360,100,100)
	frame_rate 10
	background 0
	to_points
	to_lines
	plot_points
	zero_line
	# phiMinusOne
end

def zero_line
	stroke 200, 100, 100
	line(0, height-100, width, height-100)
end

# def phiMinusOne # Ï† - 1
# 	stroke 200, 100, 100
# 	phiMinus = height * (3 - 5**0.5)/2.0
# 	line(0, phiMinus, width, phiMinus)
# end

def to_points
	fill 200, 100, 100
	@pts = ARY.map.with_index do |val, t|
		y_val = height * (1 - val)
		x_val = 10 + t * width / X_INC
		[x_val, y_val-100]
	end
	@pts.each{|pt| ellipse(*pt, 10, 10)}
end

def plot_points
	stroke 140, 100, 100 # 1 048 573
	WorstCase.zip(@pts).each do |n,(x,y)|
		num = n > ABVM ? "#{n/10**6} M" : 
					n > ABVk ? "#{n/10**3} k" : "#{n}"
		text(num,x,y-10)

	end
end

def to_lines
	stroke(140,100,100)
	@lines, @i = [], 0

	while @i < X_INC-1
		line(*@pts[@i],*@pts[@i+1]) ; @i += 1
	end
end




# An inverted result.
# ARY = [0.5,0.3333333333333333,0.8,0.75,0.6923076923076923,0.6666666666666666,
# 			0.6470588235294118,0.6363636363636364,0.6292134831460674,0.625,
# 			0.6223175965665236,0.6206896551724138,0.6196721311475409,
# 			0.6190476190476191,0.6186599874765185,0.618421052631579,
# 			0.6182731403970342,0.6181818181818182,0.6181253425909008,
# 			0.6180904522613065,0.6180688836933385,0.6180555555555556,
# 			0.6180473175608131,0.6180422264875239,0.6180390799213922,
# 			0.6180371352785146,0.6180359334071007,0.6180351906158358,
# 			0.6180347315432503,0.6180344478216818,0.6180342724717682,
# 			0.6180341640996919,0.6180340971220156,0.6180340557275542]

# WorstCase = [0,0,1,5,13,29,61,125,253,509,1021,2045,4093,8189,16381,32765,65533,
# 						131069,262141,524285,1048573,2097149,4194301,8388605,16777213,
# 						33554429,67108861,134217725,268435453,536870909,1073741821,
# 						2147483645,4294967293,8589934589]
